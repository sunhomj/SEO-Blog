{"version":3,"file":"static/webpack/static\\development\\pages\\user.js.ffd10d56cb8da5cd0b7b.hot-update.js","sources":["webpack:///./actions/auth.js"],"sourcesContent":["import fetch from \"isomorphic-fetch\";\r\nimport { API } from \"../config\";\r\nimport cookie from \"js-cookie\";\r\n\r\nexport const signup = user => {\r\n  return fetch(`${API}/signup`, {\r\n    method: \"POST\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\"\r\n    },\r\n    body: JSON.stringify(user)\r\n  })\r\n    .then(response => {\r\n      return response.json();\r\n    })\r\n    .catch(err => {\r\n      console.log(err);\r\n    });\r\n};\r\n\r\nexport const signin = user => {\r\n  return fetch(`${API}/signin`, {\r\n    method: \"POST\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\"\r\n    },\r\n    body: JSON.stringify(user)\r\n  })\r\n    .then(response => {\r\n      return response.json();\r\n    })\r\n    .catch(err => {\r\n      console.log(err);\r\n    });\r\n};\r\n\r\nexport const signout = next => {\r\n  removeCookie(\"token\");\r\n  removeLocalStorage(\"user\");\r\n  next();\r\n  return fetch(`${API}/signout`, {\r\n    method: \"GET\"\r\n  })\r\n    .then(response => {\r\n      console.log(\"Signout success\");\r\n    })\r\n    .catch(err => console.log(err));\r\n};\r\n\r\n// set cookie\r\n\r\nexport const setCookie = (key, value) => {\r\n  // client side\r\n  if (process.browser) {\r\n    cookie.set(key, value, {\r\n      expires: 1\r\n    });\r\n  }\r\n};\r\n\r\nexport const removeCookie = key => {\r\n  // client side\r\n  if (process.browser) {\r\n    cookie.remove(key, {\r\n      expires: 1\r\n    });\r\n  }\r\n};\r\n\r\n// get cookie\r\n\r\nexport const getCookie = key => {\r\n  // client side\r\n  if (process.browser) {\r\n    return cookie.get(key);\r\n  }\r\n};\r\n\r\n// localstorage\r\n\r\nexport const setLocalStorage = (key, value) => {\r\n  if (process.browser) {\r\n    localStorage.setItem(key, JSON.stringify(value));\r\n  }\r\n};\r\n\r\nexport const removeLocalStorage = key => {\r\n  if (process.browser) {\r\n    localStorage.removeItem(key);\r\n  }\r\n};\r\n\r\n//authenticate user by passing data to cookie and localstorage\r\n\r\nexport const authenticate = (data, next) => {\r\n  setCookie(\"token\", data.token);\r\n  setLocalStorage(\"user\", data.user);\r\n  next();\r\n};\r\n\r\nexport const isAuth = () => {\r\n  if (process.browser) {\r\n    const cookieChecked = getCookie(\"token\");\r\n\r\n    if (cookieChecked) {\r\n      if (localStorage.getItem(\"user\")) {\r\n        return JSON.parse(localStorage.getItem(\"user\"));\r\n      } else {\r\n        return false;\r\n      }\r\n    }\r\n  }\r\n};\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AANA;AASA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AANA;AASA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AADA;AAIA;AACA;AACA;AAAA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AAEA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}